[toc]

# 上版資訊
## 0.6.27.1 
- [x] telcoapi上版0.6.27.1 : 12/28 SIT + 12/28 UAT
    - 更新範圍:
        1.  telcoapi 修改 show-sql 為 false
        2.  telcoapi 建議加上 isPresent()
    - [x] 12/28 進度 UT + UAT : telcoapi done
    - [x] merge回到金控環境 > 12/28 建立0.6.27.1於金控
- [x] data-api上版0.6.27.1 ~~(0.6.28)~~ : 12/21 SIT + 12/21 UAT
    - 更新範圍:
        1.  根據數據中台回覆代碼決定是否存入db: s37,s11a > 0010,0011 + pcb > 0010
        2.  新增0020的 mapping > 視為 E999
        ![image](https://hackmd.io/_uploads/Bkgyjfbv6.png)
    - [x] ==12/21 進度 UT + UAT :data-api done== 
    - [x] 等UAT也測試通過，要記得merge回到金控環境 > 12/27 建立0.6.27.1於金控

## 0.6.27
- [x] VLO上版0.6.27 : 12/13(三)到SIT > 12/15(五)到UAT
    - 更新範圍: 
    ![image](https://hackmd.io/_uploads/S1jDBBVIa.png)
    - [x] ==12/13 進度 UT:app, backoffice, camunda + sql done==
    - [x] ==12/15 進度 UAT:app, backoffice, camunda + sql done==
- [x] data-api上版0.6.27 : 12/13(三)到SIT > 12/15(五)到UAT
    - 更新範圍:
        1.  data-api 迴圈 sleep 時間評估與調整 = [VNPM-508] retry 機制頻率更新
    ![image](https://hackmd.io/_uploads/SkjABSEIp.png)
    - [x] ==12/13 進度 UT:data-api done== 
    - [x] ==12/15 進度 UAT:data-api done==    
    
## 0.6.26
- [x] VLO上版0.6.26 : 12/05(二)到SIT > 12/07(四)到UAT
    - 更新範圍: 
    ![image](https://hackmd.io/_uploads/ryjH5WorT.png)
        1. [VNPM-510] 更新intellect api dto，串 intellect create customer api 時，多帶入關係人欄位
    - [x] ==12/05 進度 UT:camunda done==
    - [x] 12/07 進度 UAT:camunda done
- [x] data-api上版0.6.26 : 12/05(二)到SIT > 12/07(四)到UAT
    - 更新範圍:
        1. tb_sub_message_id 優化
        2. log.info print順序提前
    - [x] ==12/05 進度 UT:data-api done==
    - [x] ==12/07 進度 UAT:data-api done==
    
## 0.6.24
- [x] VLO上版0.6.24 : 11/30(四)到SIT > 12/4(一)到UAT
    - 更新範圍: 
    ![image](https://hackmd.io/_uploads/rJBzXT-S6.png)
      1. [VNPM-424] 新增 declare income 欄位
      2. [VNPM-424] 從 estimated income, declare income 中取其低做為月收入
      3. 清除未使用的程式碼、設定、BPMN、Table...
      4. keycloak升版，==無須調整使用的java code==，僅更換keycloak image
      5. helmchart config 也要調整
      ![image](https://hackmd.io/_uploads/SkMfHTZSp.png)
      ![image](https://hackmd.io/_uploads/BkeZQTbra.png)
    - [x] 追水哥 keycloak image 要寫到 CD pipeline參數
    - asia-east1-docker.pkg.dev/oas-nt-alm-01-prod-89cc2c/ovs-lx-vlo-01/keycloak:2023112801
    - ==紀錄一下 IMAGE_TAG 從 2023042101 -> 2023112801==
![image](https://hackmd.io/_uploads/HyOlobQH6.png)
    - [x] ==11/30 進度 sql done + UT: app, backoffice, camunda, frontend >> 缺 keycloak >> 12/1 keycloak done==
    - [x] ==12/4 進度 sql done + UAT: app, backoffice, camunda, frontend, keycloak==


# data-api 系列
- [x] data-api tb_sub_message_id 優化
新增column: payload, uuid_request > 利於確認vdo回傳的sub資料內容 & 對應的 pub uuid 做mapping
![image](https://hackmd.io/_uploads/HyaAMVmVa.png)

- [x] data-api log.info print順序提前
避免因為status code抓不到而null point 然後又看不到日期...
![image](https://hackmd.io/_uploads/ByhpNoF46.png)

- [x] data-api 如果收到不是成功的sub message 就不要存進去!
這樣才有機會再去數據中台要一次新資料 ex 數據回傳0016,0020 不要寫入db or 再新增判斷
![image](https://hackmd.io/_uploads/BkN3HsY46.png)

- [x] data-api mapping表擴充
![image](https://hackmd.io/_uploads/HJ6FoRFET.png)

0020 現在沒有收錄到 會發生null point
![image](https://hackmd.io/_uploads/r1rKvCtEa.png)
![image](https://hackmd.io/_uploads/r1LFPCt4T.png)

- [x] data-api 迴圈 sleep 時間評估與調整
SLEEP_TIME 目前為3 = total 30，建議調大為 5 or 6
![image](https://hackmd.io/_uploads/Bytzwu-S6.png)
or 宜峰有詢問過 retry頻率加快 不要是每10分鐘 > 調整camunda bpmn
==12/4 結論 : data-api 調整為60秒 > 跟著hes調整camunda頻率 預計為0.6.27==
![image](https://hackmd.io/_uploads/HJwPugjSa.png)

## 驚人消息 拼字錯誤 數據拼錯 data-api直接複製使用
等待規格確認 一次一起修改 正確的 current 錯誤的 currnet
![image](https://hackmd.io/_uploads/B1853aFNa.png)

# HES 系列
> (不調整了) HES delegate log資料全面盤點
要包含 customerId, applicationId, uuid > 不要debug 要 log.info 才看的到
![image](https://hackmd.io/_uploads/r1ye8sYNa.png)

- [x] bpmn E002的路徑(有多個) TPI要多寫入 error table 才能正常執行retry
![image](https://hackmd.io/_uploads/S1e87UbPa.png)
- 這一項已經修改在0.6.28

## HES PcbDelegate 參數調整 呼叫pcb失敗 > 目前由數據直接改值
1. request COD_PAYMENT_PERIODICITY 要修改為 "M"
![image](https://hackmd.io/_uploads/SJyUIiY4T.png)
2. AMOUNT_MONTHLY_INSTALMENT 要修改為 "" 空字串
![image](https://hackmd.io/_uploads/H1K-IpFNp.png)

- [X] CreateCustomerServiceDelegate 若發生exception 缺少audit_event
![image](https://hackmd.io/_uploads/Hkdc6uaEp.png)


# telcoapi 系列
- [X] telcoapi 修改 show-sql 為 false
目前data-api就是false，理應只有local才會需要打開
![image](https://hackmd.io/_uploads/H1o4EEo46.png)
![image](https://hackmd.io/_uploads/r15HVNoNa.png)

- [X] telcoapi 建議加上 isPresent()
- getMcErrorReturnCodeAndDesc 目前不夠完善
![image](https://hackmd.io/_uploads/H1Ty6Ztw6.png)

![image](https://hackmd.io/_uploads/SklTn-tDT.png)

